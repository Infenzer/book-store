<app-filters></app-filters>
<div class="main-page" *ngIf="!(loading$ | async) || (books$ | async).length">
  <app-slider class="slider">
    <div class="advertising">
      <h1>Реклама 1</h1>
      <p>Здесь могла быть ваша реклама</p>
    </div>
    <div class="advertising">
      <h1>Реклама 2</h1>
      <p>Здесь могла быть ваша реклама</p>
    </div>
    <div class="advertising">
      <h1>Реклама 3</h1>
      <p>Здесь могла быть ваша реклама</p>
    </div>
  </app-slider>
  
  <div class="book-list">
    <a [routerLink]="['book', book.id]" class="book" *ngFor="let book of books$ | async">

      <p class="title">{{book.volumeInfo.title}}</p>
      <img class="book-image" src="{{book.volumeInfo.imageLinks.thumbnail}}" alt="img">
      <div class="author-wrapper" *ngIf="book.volumeInfo.authors">
        <p class="author-title">{{book.volumeInfo.authors.length > 1 ? 'Авторы:' : 'Автор:'}}</p>
        <span class="author" *ngFor="let author of book.volumeInfo.authors">{{author}}</span>
      </div>
      <div *ngIf="book.saleInfo.saleability === 'FOR_SALE'" class="sale-info">
        <a class="basket-link" href="#" (click)="onAddCartClick($event, book)">В корзину</a>
        <div class="price">{{book.saleInfo.retailPrice.amount + " " + book.saleInfo.retailPrice.currencyCode}}</div>
      </div>
      <div class="sale-info not-for-sale" *ngIf="book.saleInfo.saleability !== 'FOR_SALE'">Не для продажи</div>

    </a>
  </div>

  <a *ngIf="!(loading$ | async)" 
     (click)="loadNextBookList($event)" 
     class="load-book" href="#"
  >Загурзить ещё</a>
  <div class="click-loader-wrapper" *ngIf="(loading$ | async) && (books$ | async).length">
    <app-loader></app-loader>
  </div>

  <div class="scroll-up-wrapper disabled" #scrollUp (click)="onScrollUpClick($event)">
    <svg id="scroll-up" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-up" class="svg-inline--fa fa-angle-up fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
      <path fill="currentColor" d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"></path>
    </svg>
  </div>

</div>
<div class="loader-wrapper" *ngIf="(loading$ | async) && !(books$ | async).length">
  <app-loader></app-loader>
</div>